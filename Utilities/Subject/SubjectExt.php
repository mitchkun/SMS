<?php/** * Created by PhpStorm. * User: leon-pc * Date: 11/16/2016 * Time: 10:12 AM */function getClassAverage($name,$course_id){    require (REQUIRE_CONNECTION);        $query = "             SELECT                  SUM(((Test1 + Test2) * 0.2)+(Exam * 0.6)) AS 'Total Sum'            FROM $name                            WHERE course_id = $course_id        ";        try {        $stmt   = $db->prepare($query);        $result = $stmt->execute();                $data = $stmt->fetch();                return $data['Total Sum'];    }    catch (PDOException $ex) {        echo $ex;        return 0;    }}function getAllRecordIds($name){    require (REQUIRE_CONNECTION);    $query = "             SELECT                  *            FROM $name        ";    try {        $stmt   = $db->prepare($query);        $result = $stmt->execute();    }    catch (PDOException $ex) {        echo $ex;        return null;    }    $ids = array();    while ($data = $stmt->fetch())    {        $ids[] = $data['ID'];    }    return $ids;}function registerRecord($name,$course_id,$teacher_id,$student_id,$Test1,$Test2,$Exam,$subject){    require (REQUIRE_CONNECTION);    require (REQUIRE_DATE);    $query = "INSERT INTO $subject 	( name,course_id,teacher_id,student_id,Test1,Test2,Exam) VALUES  	( :name,:course_id,:teacher_id,:student_id,:Test1,:Test2,:Exam )";    $query_params = array(        ':name' => $name,        ':course_id' => $course_id,                ':teacher_id' => $teacher_id,                ':student_id' => $student_id,                ':Test1' => $Test1,                ':Test2' => $Test2,                ':Exam' => $Exam                //':term' => $Term    );    try {        $stmt = $db->prepare($query);        $result = $stmt->execute($query_params);        return true;    }    catch (PDOException $ex) {        echo $ex;        return false;    }}function updateRecordInfo($id,$array_keys,$array_data,$sub){    require (REQUIRE_CONNECTION);    $pos = 0;    foreach ($array_keys as $array_key) {        if($array_data[$pos] == -1 || $array_data[$pos] == null)            continue;        $query = "UPDATE  $sub  SET $array_key = '" . $array_data[$pos] . "' WHERE student_id = '" . $id . "'";        try {            $stmt = $db->prepare($query);            $result = $stmt->execute();        } catch (PDOException $ex) {            echo $ex;        }        $pos++;    }    return true;}function deleteRecord($id,$name){    require (REQUIRE_CONNECTION);            $query = "DELETE FROM $name WHERE ID =  '". $id."'";    try {        $stmt = $db->prepare($query);        $result = $stmt->execute();        return true;    }    catch (PDOException $ex) {        echo $ex;        return false;    }}