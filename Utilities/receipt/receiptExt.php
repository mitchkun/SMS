<?php/** * Created by PhpStorm. * User: Leon * Date: 06/03/2017 * Time: 1:17 PM */function getReceiptHTML($payment_id,$require_payment,$require_student,$require_course){    require_once $require_payment;    require_once $require_student;    require_once $require_course;    $payment = new Payment();    $payment->create_from_id($payment_id);                 require (REQUIRE_CONNECTION);                            $query2 = "             SELECT                  balance            FROM payments             WHERE ID = '" . $payment_id . "'        ";                try {            //$stmt   = $db->prepare($query);            $stmt2 = $db->prepare($query2);            //$result = $stmt->execute();            $result2 = $stmt2->execute();        }        catch (PDOException $ex) {            die ($ex);            return false;        }                        $data2 = $stmt2->fetch();        $bal = $data2['balance'];    $receipt_number = $payment->ID + 100;    $student = new Student();    $student->create_from_id($payment->student_id);    $course = new Course();    $course->create_from_id($payment->course_id);$html = "<!doctype html><html><head>    <meta charset=\"utf-8\">    <title>Receipt $receipt_number</title>        <style>    .invoice-box{        max-width:800px;        margin:auto;        padding:30px;        border:1px solid #eee;        box-shadow:0 0 10px rgba(0, 0, 0, .15);        font-size:16px;        line-height:24px;        font-family:'Helvetica Neue', 'Helvetica', Helvetica, Arial, sans-serif;        color:#555;    }        @page { size: auto;  margin: 0mm; }    @media print {        #printPageButton {        display: none;        }    }    .invoice-box table{        width:100%;        line-height:inherit;        text-align:left;    }        .invoice-box table td{        padding:5px;        vertical-align:top;    }        .invoice-box table tr td:nth-child(2){        text-align:right;    }        .invoice-box table tr.top table td{        padding-bottom:20px;    }        .invoice-box table tr.top table td.title{        font-size:45px;        line-height:45px;        color:#333;    }        .invoice-box table tr.information table td{        padding-bottom:40px;    }        .invoice-box table tr.heading td{        background:#eee;        border-bottom:1px solid #ddd;        font-weight:bold;    }        .invoice-box table tr.details td{        padding-bottom:20px;    }        .invoice-box table tr.item td{        border-bottom:1px solid #eee;    }        .invoice-box table tr.item.last td{        border-bottom:none;    }        .invoice-box table tr.total td:nth-child(2){        border-top:2px solid #eee;        font-weight:bold;    }        @media only screen and (max-width: 600px) {        .invoice-box table tr.top table td{            width:100%;            display:block;            text-align:center;        }                .invoice-box table tr.information table td{            width:100%;            display:block;            text-align:center;        }    }    </style></head><body>    <div class=\"invoice-box\">        <table cellpadding=\"0\" cellspacing=\"0\">            <tr class=\"top\">                <td colspan=\"2\">                    <table>                        <tr>                            <td class=\"title\">                                <img src=\"../../assets/img/Annadale_logo - Copy.png\" style=\"width:100%; max-width:300px;\">                            </td>                                                        <td>                                Receipt #: $receipt_number<br>                                Date: $payment->date<br>                            </td>                        </tr>                    </table>                </td>            </tr>                        <tr class=\"information\">                <td colspan=\"3\">                    <table>                        <tr>                            <td>" .                                 SYSTEM_NAME . "<br>                                Box A14<br>                                MAYIWANE<br>                                +268 2435 1516                            </td>                                                        <td>                                $student->name $student->surname<br>                                $student->student_id<br>                                $student->address<br>                                $student->phone_number                            </td>                        </tr>                    </table>                </td>            </tr>                                    <tr class=\"heading\">                <td>                    Course                </td>                                <td>                    Price                </td>            </tr>                        <tr class=\"item\">                <td>                    Grade $student->course_id                </td>                                <td>                    E$payment->amount                </td>            </tr>";            if ($student->course_id < 3) $html2 = "        <tr class=\"item\">                <td>                    School Fees                </td>                                <td>                    E". number_format((float)$payment->amount * (80/560),2) . "                </td>                </tr>                <tr class=\"item\">                <td>                    Practical Subjects                </td>                                <td>                    E". number_format((float)$payment->amount * (0/560),2) . "                </td>                </tr>                <tr class=\"item\">                <td>                    Zondla                </td>                                <td>                    E". number_format((float)$payment->amount * (150/560),2) . "                </td>                </tr>                <tr class=\"item\">                <td>                    Sports                </td>                                <td>                    E". number_format((float)$payment->amount * (25/560),2) . "                </td>                </tr>                <tr class=\"item\">                <td>                    Maintenance                </td>                                <td>                    E". number_format((float)$payment->amount * (80/560),2) . "                </td>                </tr>                <tr class=\"item\">                <td>                    Wages                </td>                                <td>                    E". number_format((float)$payment->amount * (150/560),2) . "                </td>            </tr>                            <tr class=\"item\">                <td>                    Services                </td>                                <td>                    E". number_format((float)$payment->amount * (60/560),2) . "                </td>            </tr>                <tr class=\"item\">                <td>                    Bank Charges                </td>                                <td>                    E". number_format((float)$payment->amount * (15/560),2) . "                </td>            </tr>            <tr class=\"total\">                <td></td>                                <td>                   Total : E$payment->amount                </td>            </tr>                            <tr class=\"total\">                            <td></td>                                <td>                   Balance : E$bal                </td>            </tr>        </table>    </div><button id='printPageButton' onClick='window.print()'>Print</button></body></html>            ";else if ($student->course_id < 5) {    $html2 = "        <tr class=\"item\">                <td>                    School Fees                </td>                                <td>                    E". number_format((float)$payment->amount * (80/580),2) . "                </td>                </tr>                <tr class=\"item\">                <td>                    Practical Subjects                </td>                                <td>                    E". number_format((float)$payment->amount * (20/580),2) . "                </td>                </tr>                <tr class=\"item\">                <td>                    Zondla                </td>                                <td>                    E". number_format((float)$payment->amount * (150/580),2) . "                </td>                </tr>                <tr class=\"item\">                <td>                    Sports                </td>                                <td>                    E". number_format((float)$payment->amount * (25/580),2) . "                </td>                </tr>                <tr class=\"item\">                <td>                    Maintenance                </td>                                <td>                    E". number_format((float)$payment->amount * (80/580),2) . "                </td>                </tr>                <tr class=\"item\">                <td>                    Wages                </td>                                <td>                    E". number_format((float)$payment->amount * (150/580),2) . "                </td>            </tr>                            <tr class=\"item\">                <td>                    Services                </td>                                <td>                    E". number_format((float)$payment->amount * (60/580),2) . "                </td>            </tr>                <tr class=\"item\">                <td>                    Bank Charges                </td>                                <td>                    E". number_format((float)$payment->amount * (15/580),2) . "                </td>            </tr>            <tr class=\"total\">                <td></td>                                <td>                   Total : E$payment->amount                </td>            </tr>                            <tr class=\"total\">                            <td></td>                                <td>                   Balance : E$bal                </td>            </tr>        </table>    </div><button id='printPageButton' onClick='window.print()'>Print</button></body></html>            ";}else if ($student->course_id < 6) {    $html2 = "        <tr class=\"item\">                <td>                    School Fees                </td>                                <td>                    E". number_format((float)$payment->amount * (80/640),2) . "                </td>                </tr>                <tr class=\"item\">                <td>                    Practical Subjects                </td>                                <td>                    E". number_format((float)$payment->amount * (80/640),2) . "                </td>                </tr>                <tr class=\"item\">                <td>                    Zondla                </td>                               <td>                    E". number_format((float)$payment->amount * (150/640),2) . "                </td>                </tr>                <tr class=\"item\">                <td>                    Sports                </td>                                <td>                    E". number_format((float)$payment->amount * (25/640),2) . "                </td>                </tr>                <tr class=\"item\">                <td>                    Maintenance                </td>                                <td>                    E". number_format((float)$payment->amount * (80/640),2) . "                </td>                </tr>                <tr class=\"item\">                <td>                    Wages                </td>                                <td>                    E". number_format((float)$payment->amount * (150/640),2) . "                </td>            </tr>                            <tr class=\"item\">                <td>                    Services                </td>                                <td>                    E". number_format((float)$payment->amount * (60/640),2) . "                </td>            </tr>                <tr class=\"item\">                <td>                    Bank Charges                </td>                                <td>                    E". number_format((float)$payment->amount * (15/640),2) . "                </td>            </tr>            <tr class=\"total\">                <td></td>                                <td>                   Total : E$payment->amount                </td>            </tr>                            <tr class=\"total\">                            <td></td>                                <td>                   Balance : E$bal                </td>            </tr>        </table>    </div><button id='printPageButton' onClick='window.print()'>Print</button></body></html>            ";}else if ($student->course_id < 8) {    $html2 = "        <tr class=\"item\">                <td>                    School Fees                </td>                                <td>                    E". number_format((float)$payment->amount * (80/670),2) . "                </td>                </tr>                <tr class=\"item\">                <td>                    Practical Subjects                </td>                                <td>                    E". number_format((float)$payment->amount * (110/670),2) . "                </td>                </tr>                <tr class=\"item\">                <td>                    Zondla                </td>                                <td>                    E". number_format((float)$payment->amount * (150/670),2) . "                </td>                </tr>                <tr class=\"item\">                <td>                    Sports                </td>                                <td>                    E". number_format((float)$payment->amount * (25/670),2) . "                </td>                </tr>                <tr class=\"item\">                <td>                    Maintenance                </td>                                <td>                    E". number_format((float)$payment->amount * (80/670),2) . "                </td>                </tr>                <tr class=\"item\">                <td>                    Wages                </td>                                <td>                    E". number_format((float)$payment->amount * (150/670),2) . "                </td>            </tr>                            <tr class=\"item\">                <td>                    Services                </td>                                <td>                    E". number_format((float)$payment->amount * (60/670),2) . "                </td>            </tr>                <tr class=\"item\">                <td>                    Bank Charges                </td>                                <td>                    E". number_format((float)$payment->amount * (15/670),2) . "                </td>            </tr>            <tr class=\"total\">                <td></td>                                <td>                   Total : E$payment->amount                </td>            </tr>                            <tr class=\"total\">                            <td></td>                                <td>                   Balance : E$bal                </td>            </tr>        </table>    </div><button id='printPageButton' onClick='window.print()'>Print</button></body></html>            ";}else {    $html2 = "        <tr class=\"item\">                <td>                    School Fees                </td>                                <td>                                    </td>                <td>                    E". number_format((float)0 * (80/580),2) . "                </td>                </tr>                <tr class=\"item\">                <td>                    Practical Subjects                </td>                                <td>                    E". number_format((float)0 * (20/580),2) . "                </td>                </tr>                <tr class=\"item\">                <td>                    Zondla                </td>                                <td>                    E". number_format((float)0 * (150/580),2) . "                </td>                </tr>                <tr class=\"item\">                <td>                    Sports                </td>                                <td>                    E". number_format((float)0 * (25/580),2) . "                </td>                </tr>                <tr class=\"item\">                <td>                    Maintenance                </td>                                <td>                    E". number_format((float)0 * (80/580),2) . "                </td>                </tr>                <tr class=\"item\">                <td>                    Wages                </td>                                <td>                    E". number_format((float)0 * (150/580),2) . "                </td>            </tr>                            <tr class=\"item\">                <td>                    Services                </td>                                <td>                    E". number_format((float)0 * (60/580),2) . "                </td>            </tr>                <tr class=\"item\">                <td>                    Bank Charges                </td>                                <td>                                    </td>                <td>                    E". number_format((float)0 * (15/580),2) . "                </td>            </tr>            <tr class=\"total\">                <td></td>                                <td>                   Total : E0                </td>            </tr>                            <tr class=\"total\">                            <td></td>                                <td>                   Balance : E$bal                </td>            </tr>        </table>    </div><button id='printPageButton' onClick='window.print()'>Print</button></body></html>       ";}            $htm = $html . $html2;    return $htm;}